---
import { Icon } from 'astro-icon/components';
import { marked } from 'marked';

interface Props {
  heading?: string;
  content: string;
  icon?: string;
  color?: string;
}

const { heading, content, icon = 'mdi:lightbulb', color = 'blue' } = Astro.props;

// Color classes pro různé barvy
const colorClasses: Record<string, { bg: string; border: string; icon: string; heading: string; prose: string }> = {
  blue: {
    bg: 'bg-blue-50',
    border: 'border-blue-500',
    icon: 'text-blue-600',
    heading: 'text-blue-900',
    prose: 'prose-blue text-blue-800'
  },
  cyan: {
    bg: 'bg-cyan-50',
    border: 'border-cyan-500',
    icon: 'text-cyan-600',
    heading: 'text-cyan-900',
    prose: 'prose-cyan text-cyan-800'
  },
  purple: {
    bg: 'bg-purple-50',
    border: 'border-purple-500',
    icon: 'text-purple-600',
    heading: 'text-purple-900',
    prose: 'prose-purple text-purple-800'
  },
  pink: {
    bg: 'bg-pink-50',
    border: 'border-pink-500',
    icon: 'text-pink-600',
    heading: 'text-pink-900',
    prose: 'prose-pink text-pink-800'
  },
  green: {
    bg: 'bg-green-50',
    border: 'border-green-500',
    icon: 'text-green-600',
    heading: 'text-green-900',
    prose: 'prose-green text-green-800'
  },
  orange: {
    bg: 'bg-orange-50',
    border: 'border-orange-500',
    icon: 'text-orange-600',
    heading: 'text-orange-900',
    prose: 'prose-orange text-orange-800'
  },
  red: {
    bg: 'bg-red-50',
    border: 'border-red-500',
    icon: 'text-red-600',
    heading: 'text-red-900',
    prose: 'prose-red text-red-800'
  },
  yellow: {
    bg: 'bg-yellow-50',
    border: 'border-yellow-500',
    icon: 'text-yellow-600',
    heading: 'text-yellow-900',
    prose: 'prose-yellow text-yellow-800'
  },
  indigo: {
    bg: 'bg-indigo-50',
    border: 'border-indigo-500',
    icon: 'text-indigo-600',
    heading: 'text-indigo-900',
    prose: 'prose-indigo text-indigo-800'
  },
  teal: {
    bg: 'bg-teal-50',
    border: 'border-teal-500',
    icon: 'text-teal-600',
    heading: 'text-teal-900',
    prose: 'prose-teal text-teal-800'
  },
};

const colors = colorClasses[color] || colorClasses.blue;

// Parse markdown pokud není HTML
const isHtml = content.includes('<p>') || content.includes('<h2>');
const htmlContent = isHtml ? content : marked.parse(content);
---

<div class={`${colors.bg} border-l-4 ${colors.border} rounded-lg p-6 mb-8`}>
  <div class="flex items-start gap-4">
    <div class="shrink-0">
      <Icon name={icon} class={`w-6 h-6 ${colors.icon}`} />
    </div>
    <div class="flex-1">
      {heading && (
        <h4 class={`text-lg font-bold ${colors.heading} mb-2`}>{heading}</h4>
      )}
      <div class={`prose ${colors.prose} max-w-none`}>
        <Fragment set:html={htmlContent} />
      </div>
    </div>
  </div>
</div>
