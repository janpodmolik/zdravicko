---
import {
  getWeekScheduleWithNotices,
  NOTICE_TYPE_CLASSES,
  type WeekDaySchedule,
  type NoticeType
} from '../../utils/openingHours';

const weekSchedule = getWeekScheduleWithNotices();

/**
 * Vrátí CSS třídy pro zobrazení ordinačních hodin podle stavu dne
 * POZOR: isToday NEPOUŽÍVÁME - to se nastaví až v browseru
 */
function getHourClass(schedule: WeekDaySchedule): string {
  if (schedule.isWeekend && schedule.isClosed) return 'text-gray-500';
  if (schedule.isClosed) return 'text-red-600';

  if (schedule.isModified && schedule.noticeType) {
    return `${NOTICE_TYPE_CLASSES[schedule.noticeType].text} font-semibold`;
  }

  return 'text-gray-600';
}
---

<div class="bg-white/20 backdrop-blur-md rounded-2xl shadow-lg overflow-hidden border-2 border-white/50">
  <div class="p-8">
    <div class="space-y-4">
      {weekSchedule.map((schedule) => (
        <div
          data-day-of-week={schedule.dayOfWeek}
          data-regular-hours={schedule.regularHours || 'Zavřeno'}
          class="flex justify-between items-center py-4 px-4 rounded-lg transition-colors border-2 border-transparent"
        >
          <div>
            <span class="font-semibold text-gray-900" data-day-name>
              {schedule.dayName}
              <span class="ml-2 text-xs bg-primary text-white px-2 py-1 rounded-full hidden" data-today-badge>
                Dnes
              </span>
              {schedule.noticeBadgeLabel && schedule.noticeType && (
                <span 
                  class:list={['ml-2 text-xs text-white px-2 py-1 rounded-full', NOTICE_TYPE_CLASSES[schedule.noticeType].background]}
                  data-notice-badge
                >
                  {schedule.noticeBadgeLabel}
                </span>
              )}
            </span>
          </div>

          <div class="text-right">
            <span 
              class:list={['font-medium', getHourClass(schedule)]}
              data-actual-hours
              data-is-modified={schedule.isModified ? 'true' : 'false'}
            >
              {schedule.actualHours || 'Zavřeno'}
            </span>

            {schedule.changedFromRegular && schedule.regularHours && (
              <span class="text-sm ml-2 text-gray-600 line-through" data-regular-hours-strikethrough>
                {schedule.regularHours}
              </span>
            )}
          </div>
        </div>
      ))}
    </div>
  </div>
</div>
