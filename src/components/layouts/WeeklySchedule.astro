---
import {
  getWeekScheduleWithNotices,
  NOTICE_TYPE_CLASSES,
  type WeekDaySchedule,
  type NoticeType
} from '../../utils/openingHours';

const weekSchedule = getWeekScheduleWithNotices();

// ============================================================================
// HELPER FUNKCE PRO STYLING
// ============================================================================

/**
 * Vrátí CSS třídy pro zobrazení ordinačních hodin podle stavu dne
 */
function getHourClass(schedule: WeekDaySchedule): string {
  if (schedule.isWeekend && schedule.isClosed) return 'text-gray-500';
  if (schedule.isClosed) return 'text-red-600';
  if (schedule.isToday) return 'text-primary-600';

  if (schedule.isModified && schedule.noticeType) {
    return `${NOTICE_TYPE_CLASSES[schedule.noticeType].text} font-semibold`;
  }

  return 'text-gray-600';
}

/**
 * Vrátí CSS třídy pro badge se změnou
 */
function getChangeBadgeClass(noticeType?: NoticeType): string {
  if (!noticeType) return 'text-amber-600';
  return NOTICE_TYPE_CLASSES[noticeType].badge;
}
---

<div class="bg-white/20 backdrop-blur-md rounded-2xl shadow-lg overflow-hidden border-2 border-white/50">
  <div class="p-8">
    <div class="space-y-4">
      {weekSchedule.map((schedule) => (
        <div
          class:list={[
            'flex justify-between items-center py-4 px-4 rounded-lg transition-colors',
            schedule.isToday ? 'bg-primary-50 border-2 border-primary' : 'border-b-2 border-gray-100 last:border-b-0'
          ]}
        >
          <div>
            <span class:list={['font-semibold', schedule.isToday ? 'text-primary-700' : 'text-gray-900']}>
              {schedule.dayName}
              {schedule.isToday && (
                <span class="ml-2 text-xs bg-primary text-white px-2 py-1 rounded-full">Dnes</span>
              )}
              {schedule.noticeBadgeLabel && schedule.noticeType && (
                <span class:list={['ml-2 text-xs text-white px-2 py-1 rounded-full', NOTICE_TYPE_CLASSES[schedule.noticeType].background]}>
                  {schedule.noticeBadgeLabel}
                </span>
              )}
            </span>
          </div>

          <div class="text-right">
            <span class:list={['font-medium', getHourClass(schedule)]}>
              {schedule.actualHours || 'Zavřeno'}
            </span>

            {schedule.changedFromRegular && schedule.regularHours && (
              <span class="text-sm ml-2 text-gray-600 line-through">
                {schedule.regularHours}
              </span>
            )}
          </div>
        </div>
      ))}
    </div>

  </div>
</div>
