---
import { Icon } from 'astro-icon/components';
import { formatDateShort } from '../utils/dateFormat';
import type { CollectionEntry } from 'astro:content';

interface Props {
  news: CollectionEntry<'news'>;
}

const { news } = Astro.props;

// Mapování typů na konfiguraci
type NewsType = 'info' | 'warning' | 'success';

const typeConfig: Record<NewsType, { bgClass: string; textClass: string; borderClass: string; label: string }> = {
  info: {
    bgClass: 'bg-blue-600',
    textClass: 'text-blue-600',
    borderClass: 'border-blue-200',
    label: 'Informace'
  },
  warning: {
    bgClass: 'bg-orange-600',
    textClass: 'text-orange-600',
    borderClass: 'border-orange-200',
    label: 'Upozornění'
  },
  success: {
    bgClass: 'bg-green-600',
    textClass: 'text-green-600',
    borderClass: 'border-green-200',
    label: 'Oznámení'
  }
};

const config = typeConfig[news.data.type];
---

<article class={`bg-white rounded-xl border-2 ${config.borderClass} p-6 hover:border-blue-400 hover:shadow-md transition-all`}>
  <div class="flex items-start gap-4">
    <div class={`w-12 h-12 ${config.bgClass} rounded-lg flex items-center justify-center shrink-0`}>
      <Icon name={news.data.icon} class="w-6 h-6 text-white" />
    </div>
    <div class="flex-1">
      <div class="flex items-center gap-2 mb-2">
        <span class={`text-xs font-medium ${config.textClass} bg-opacity-10 ${config.bgClass} bg-opacity-10 px-2 py-1 rounded`}>
          {config.label}
        </span>
        <span class="text-xs text-gray-500 ml-auto">
          {formatDateShort(news.data.date.toISOString())}
        </span>
      </div>
      <h3 class="font-bold text-lg text-gray-900">
        {news.data.title}
      </h3>
    </div>
  </div>
</article>
