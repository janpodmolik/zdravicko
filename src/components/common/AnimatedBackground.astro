---
/**
 * Animované pozadí se srdíčky a gradientem
 * Může být použito v Hero sekci, PageHeader a dalších místech
 * Podporuje různé barevné schémata pro sezónní motivy
 */

export interface Props {
  variant?: 'blue' | 'pink' | 'orange' | 'green' | 'purple';
  heartsCount?: number;
  className?: string;
}

const {
  variant = 'blue',
  heartsCount = 10,
  className = ''
} = Astro.props;

// Definice barevných schémat pro různé motivy
const colorSchemes = {
  blue: {
    gradient: 'linear-gradient(135deg, #3a6fa8 0%, #5085c6 25%, #6ba3e0 50%, #5085c6 75%, #4070b0 100%)',
    heartColor: 'rgba(255, 255, 255, 0.5)',
  },
  pink: {
    gradient: 'linear-gradient(135deg, #be185d 0%, #db2777 25%, #ec4899 50%, #db2777 75%, #be185d 100%)',
    heartColor: 'rgba(255, 255, 255, 0.5)',
  },
  orange: {
    gradient: 'linear-gradient(135deg, #c2410c 0%, #ea580c 25%, #f97316 50%, #ea580c 75%, #c2410c 100%)',
    heartColor: 'rgba(255, 255, 255, 0.5)',
  },
  green: {
    gradient: 'linear-gradient(135deg, #15803d 0%, #16a34a 25%, #22c55e 50%, #16a34a 75%, #15803d 100%)',
    heartColor: 'rgba(255, 255, 255, 0.5)',
  },
  purple: {
    gradient: 'linear-gradient(135deg, #6b21a8 0%, #7c3aed 25%, #a78bfa 50%, #7c3aed 75%, #6b21a8 100%)',
    heartColor: 'rgba(255, 255, 255, 0.5)',
  },
};

const scheme = colorSchemes[variant];

// Generování náhodných pozic a velikostí pro srdíčka
const hearts = Array.from({ length: heartsCount }, (_, i) => ({
  id: i + 1,
  left: Math.random() * 90 + 5, // 5-95%
  top: Math.random() * 80 + 10, // 10-90%
  size: Math.random() * 1.5 + 2, // 2-3.5rem
  delay: -(Math.random() * 14 + 1), // -1s až -15s
}));
---

<div class:list={['animated-background', className]} data-variant={variant}>
  <!-- Floating hearts -->
  <div class="hearts-container">
    {hearts.map(heart => (
      <div
        class="heart"
        style={`left: ${heart.left}%; top: ${heart.top}%; font-size: ${heart.size}rem; animation-delay: ${heart.delay}s;`}
      >
        ♡
      </div>
    ))}
  </div>

  <slot />
</div>

<style define:vars={{ gradient: scheme.gradient, heartColor: scheme.heartColor }}>
  .animated-background {
    position: relative;
    background: var(--gradient);
    overflow: hidden;
  }

  .hearts-container {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
    z-index: 1;
    pointer-events: none;
  }

  .heart {
    position: absolute;
    color: var(--heartColor);
    animation: float 15s infinite ease-in-out;
    pointer-events: none;
  }

  @keyframes float {
    0% {
      transform: translate(0, 0);
      opacity: 0.5;
    }
    25% {
      transform: translate(20px, -30px);
      opacity: 0.65;
    }
    50% {
      transform: translate(-15px, -50px);
      opacity: 0.8;
    }
    75% {
      transform: translate(25px, -35px);
      opacity: 0.65;
    }
    100% {
      transform: translate(0, 0);
      opacity: 0.5;
    }
  }
</style>
