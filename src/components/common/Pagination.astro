---
import { Icon } from 'astro-icon/components';
import type { Page } from 'astro';

interface Props {
  page: Page;
  baseUrl: string;
}

const { page, baseUrl } = Astro.props;

const CHEVRON_LEFT = 'mdi:chevron-left';
const CHEVRON_RIGHT = 'mdi:chevron-right';

const buttonBaseClasses = 'px-4 py-2 rounded-lg font-medium flex items-center gap-2 transition-colors';
const prevButtonClasses = `${buttonBaseClasses} bg-white border-2 border-blue-600 text-blue-600 hover:bg-blue-50`;
const nextButtonClasses = `${buttonBaseClasses} bg-blue-600 text-white hover:bg-blue-700`;

const pageNumberBaseClasses = 'w-10 h-10 flex items-center justify-center rounded-lg font-medium transition-colors';
const activePageClasses = 'bg-blue-600 text-white';
const inactivePageClasses = 'bg-white border-2 border-gray-200 text-gray-700 hover:border-blue-300 hover:bg-blue-50';
---

{page.lastPage > 1 && (
  <nav class="mt-12 flex items-center justify-center gap-2" aria-label="Stránkování">
    {page.url.prev && (
      <a href={page.url.prev} class={prevButtonClasses}>
        <Icon name={CHEVRON_LEFT} class="w-5 h-5" />
        Předchozí
      </a>
    )}

    <div class="flex items-center gap-2">
      {Array.from({ length: page.lastPage }, (_, i) => i + 1).map((pageNum) => (
        <a
          href={pageNum === 1 ? baseUrl : `${baseUrl}/${pageNum}`}
          class:list={[
            pageNumberBaseClasses,
            pageNum === page.currentPage ? activePageClasses : inactivePageClasses
          ]}
          aria-current={pageNum === page.currentPage ? 'page' : undefined}
        >
          {pageNum}
        </a>
      ))}
    </div>

    {page.url.next && (
      <a href={page.url.next} class={nextButtonClasses}>
        Další
        <Icon name={CHEVRON_RIGHT} class="w-5 h-5" />
      </a>
    )}
  </nav>
)}
