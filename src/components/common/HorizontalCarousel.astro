---
interface Props {
  title?: string;
  description?: string;
  ctaText?: string;
  ctaLink?: string;
  id?: string;
  bgColor?: 'white' | 'gray' | 'blue';
}

const {
  title,
  description,
  ctaText,
  ctaLink,
  id,
  bgColor = 'white',
} = Astro.props;

const bgClasses: Record<string, string> = {
  white: 'bg-white',
  gray: 'bg-gray-50',
  blue: 'bg-blue-50'
};
---

<section id={id} class:list={[
  'py-8 md:py-10',
  'relative overflow-visible',
  bgClasses[bgColor]
]}>
  <div class="absolute inset-0 pointer-events-none overflow-visible z-0">
    <slot name="background" />
  </div>

  <div class="relative z-10">
    <!-- Hlavička s max-width pro pěkné centrování -->
    <div class="max-w-7xl mx-auto px-4">
      {(title || description) && (
        <div class="text-center mb-6 md:mb-7">
          <div class="max-w-3xl mx-auto space-y-3 md:space-y-4">
            {title && (
              <h2 class="text-3xl md:text-4xl font-extrabold tracking-tight text-blue-900">
                <span class="relative inline-block">
                  <span class="absolute inset-x-2 bottom-1 h-3 bg-blue-100/70 rounded-full md:h-4 md:bottom-0"></span>
                  <span class="relative px-2 md:px-3">
                    {title}
                  </span>
                </span>
              </h2>
            )}
            {description && (
              <p class="text-base md:text-lg text-blue-700/90 leading-relaxed">
                {description}
              </p>
            )}
          </div>
        </div>
      )}
    </div>

    <!-- Wrapper s paddingem -->
    <div class="pl-4 md:pl-8 pr-4 md:pr-8">
      <!-- Scrollovací kontejner -->
      <div class="overflow-x-auto scrollbar-hide -mx-4 md:-mx-8">
        <div class="flex py-8 px-4 md:px-8 w-max mx-auto gap-3 md:gap-4">
          <slot />
        </div>
      </div>
    </div>

    <!-- CTA dole -->
    {ctaText && ctaLink && (
      <div class="max-w-7xl mx-auto px-4 text-center mt-6">
        <a
          href={ctaLink}
          class:list={[
            'inline-flex items-center justify-center font-semibold',
            'px-6 md:px-8 py-3 md:py-4 rounded-full text-sm md:text-base',
            'text-white bg-blue-600 hover:bg-blue-700 shadow-lg shadow-blue-500/20',
            'focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-700',
            'transition duration-200'
          ]}
        >
          {ctaText}
        </a>
      </div>
    )}
  </div>
</section>

<style>
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
</style>
