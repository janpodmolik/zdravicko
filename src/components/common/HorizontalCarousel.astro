---
import { Icon } from 'astro-icon/components';

interface Props {
  title?: string;
  description?: string;
  ctaText?: string;
  ctaLink?: string;
  id?: string;
  bgColor?: 'white' | 'gray' | 'blue';
}

const {
  title,
  description,
  ctaText,
  ctaLink,
  id,
  bgColor = 'white'
} = Astro.props;

const bgClasses: Record<string, string> = {
  white: 'bg-white',
  gray: 'bg-gray-50',
  blue: 'bg-blue-50'
};

const ARROW_ICON = 'mdi:chevron-right';
---

<section id={id} class:list={['py-12 md:py-16 overflow-visible', bgClasses[bgColor]]}>
  <!-- Hlavička s max-width pro pěkné centrování -->
  <div class="max-w-7xl mx-auto px-4">
    {(title || description) && (
      <div class="text-center mb-6 md:mb-8">
        <div class="max-w-2xl mx-auto">
          {title && (
            <h2 class="text-2xl md:text-3xl font-bold text-gray-900 mb-2">
              {title}
            </h2>
          )}
          {description && (
            <p class="text-base md:text-lg text-gray-600">
              {description}
            </p>
          )}
        </div>
        {ctaText && ctaLink && (
          <a
            href={ctaLink}
            class:list={[
              'inline-flex items-center gap-2 font-semibold mt-4',
              'text-blue-600 hover:text-blue-700 text-sm md:text-base'
            ]}
          >
            {ctaText}
            <Icon name={ARROW_ICON} class="w-5 h-5" />
          </a>
        )}
      </div>
    )}
  </div>

  <!-- Horizontální scrollovací kontejner - celá šířka obrazovky -->
  <div class="w-full overflow-visible">
    <div
      class:list={[
        'flex gap-4 md:gap-6 overflow-x-auto snap-x snap-mandatory py-8 carousel-container',
        'scrollbar-hide'
      ]}
      style="padding-left: max(1rem, calc((100vw - 1280px) / 2)); padding-right: max(1rem, calc((100vw - 1280px) / 2));"
    >
      <slot />
    </div>
  </div>
</section>

<style>
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  .overflow-x-auto {
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch;
  }

  /* Umožňuje overflow pouze horizontálně, vertikálně nechá shadow projít */
  .carousel-container {
    overflow-y: visible !important;
  }
</style>
