---
import { Icon } from 'astro-icon/components';
import { getOpeningHoursForDay } from '../utils/openingHours';

interface Props {
  showInfoBox?: boolean;
  showLink?: boolean;
}

const { 
  showInfoBox = true,
  showLink = false
} = Astro.props;

const today = new Date().getDay();

const weekSchedule = [
  { day: 'Pondělí', hours: getOpeningHoursForDay(1) || 'Zavřeno', isToday: today === 1 },
  { day: 'Úterý', hours: getOpeningHoursForDay(2) || 'Zavřeno', isToday: today === 2 },
  { day: 'Středa', hours: getOpeningHoursForDay(3) || 'Zavřeno', isToday: today === 3 },
  { day: 'Čtvrtek', hours: getOpeningHoursForDay(4) || 'Zavřeno', isToday: today === 4 },
  { day: 'Pátek', hours: getOpeningHoursForDay(5) || 'Zavřeno', isToday: today === 5 },
  { day: 'Sobota - Neděle', hours: 'Zavřeno', isToday: today === 0 || today === 6, isClosed: true },
];
---

<div class="bg-white rounded-2xl shadow-lg overflow-hidden border-2 border-gray-100">
  <div class="p-8">
    <div class="space-y-4">
      {weekSchedule.map(({ day, hours, isToday, isClosed }) => (
        <div 
          class:list={[
            'flex justify-between items-center py-4 px-4 rounded-lg transition-colors',
            isToday ? 'bg-blue-50 border-2 border-blue-200' : 'border-b border-gray-200'
          ]}
        >
          <span class:list={[
            'font-semibold',
            isToday ? 'text-blue-900' : 'text-gray-900'
          ]}>
            {day}
            {isToday && (
              <span class="ml-2 text-xs bg-blue-600 text-white px-2 py-1 rounded-full">
                Dnes
              </span>
            )}
          </span>
          <span class:list={[
            'font-medium',
            isClosed ? 'text-red-600' : 
            isToday ? 'text-blue-700' : 'text-gray-600'
          ]}>
            {hours}
          </span>
        </div>
      ))}
    </div>
    
    {showInfoBox && (
      <div class="mt-8 p-6 bg-blue-50 rounded-xl border-2 border-blue-100">
        <div class="flex gap-3">
          <Icon name="mdi:information" class="w-6 h-6 text-blue-600 shrink-0 mt-0.5" />
          <div>
            <p class="font-semibold text-gray-900 mb-2">Důležité informace:</p>
            <ul class="text-sm text-gray-700 space-y-1">
              <li>• Na všechny vyšetření je nutné se objednat předem</li>
              <li>• Objednání telefonicky nebo online přes náš systém</li>
              <li>• V případě akutních problémů volejte vždy předem</li>
            </ul>
          </div>
        </div>
      </div>
    )}
    
    {showLink && (
      <div class="mt-6 text-center">
        <a 
          href="/ordinacni-hodiny"
          class="inline-flex items-center gap-2 px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition-colors"
        >
          Celý rozvrh a kontakty
          <Icon name="mdi:arrow-right" class="w-5 h-5" />
        </a>
      </div>
    )}
  </div>
</div>
