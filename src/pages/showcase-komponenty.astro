---
import Layout from '../layouts/Layout.astro';
import Header from '../components/common/Header.astro';
import MobileMenu from '../components/common/MobileMenu.astro';
import Footer from '../components/common/Footer.astro';
import { Icon } from 'astro-icon/components';

// Import v≈°ech blok≈Ø
import TextBlock from '../components/blocks/TextBlock.astro';
import FeaturesListBlock from '../components/blocks/FeaturesListBlock.astro';
import TipBoxBlock from '../components/blocks/TipBoxBlock.astro';
import WarningBoxBlock from '../components/blocks/WarningBoxBlock.astro';
import FAQBlock from '../components/blocks/FAQBlock.astro';
import StepsBlock from '../components/blocks/StepsBlock.astro';
import CTABoxBlock from '../components/blocks/CTABoxBlock.astro';
import ImageBlock from '../components/blocks/ImageBlock.astro';

// Dostupn√© barvy
const colors = [
  { id: 'blue', name: 'Modr√°', hex: '#2563eb' },
  { id: 'cyan', name: 'Tyrkysov√°', hex: '#06b6d4' },
  { id: 'purple', name: 'Fialov√°', hex: '#9333ea' },
  { id: 'pink', name: 'R≈Ø≈æov√°', hex: '#ec4899' },
  { id: 'green', name: 'Zelen√°', hex: '#16a34a' },
  { id: 'orange', name: 'Oran≈æov√°', hex: '#ea580c' },
  { id: 'red', name: 'ƒåerven√°', hex: '#dc2626' },
  { id: 'yellow', name: '≈Ωlut√°', hex: '#ca8a04' },
  { id: 'indigo', name: 'Indigo', hex: '#4f46e5' },
  { id: 'teal', name: 'Teal', hex: '#0d9488' },
];
---

<Layout
  title="Showcase komponent slu≈æeb - Zdrav√≠ƒçko"
  description="Testovac√≠ str√°nka pro v≈°echny komponenty slu≈æeb s p≈ôep√≠naƒçem barev"
>
  <Header />
  <MobileMenu />

  <main class="bg-gray-50">
    <!-- Hero Section -->
    <section class="pt-8 pb-12 bg-linear-to-br from-purple-50 via-pink-50 to-purple-100">
      <div class="container mx-auto px-4">
        <div class="max-w-4xl mx-auto text-center">
          <div class="inline-flex items-center gap-2 bg-purple-100 text-purple-700 px-4 py-2 rounded-full text-sm font-medium mb-6">
            <Icon name="mdi:palette" class="w-5 h-5" />
            Testovac√≠ prost≈ôed√≠ pro doktory
          </div>

          <h1 class="text-4xl md:text-5xl font-bold text-gray-900 mb-4">
            üé® Showcase v≈°ech komponent
          </h1>
          <p class="text-xl text-gray-600 mb-8">
            Vyzkou≈°ejte si v≈°echny dostupn√© bloky pro vytv√°≈ôen√≠ slu≈æeb a p≈ôep√≠nejte mezi barvami
          </p>
        </div>
      </div>
    </section>

    <!-- Color Switcher -->
    <section class="sticky top-0 z-50 bg-white border-b border-gray-200 shadow-sm">
      <div class="container mx-auto px-4 py-4">
        <div class="max-w-4xl mx-auto">
          <div class="flex items-center gap-4 flex-wrap">
            <span class="text-sm font-medium text-gray-700">
              <Icon name="mdi:palette" class="w-5 h-5 inline-block mr-2" />
              Vyberte barvu:
            </span>
            <div class="flex gap-2 flex-wrap" id="color-switcher">
              {colors.map((color) => (
                <button
                  data-color={color.id}
                  class="color-btn px-4 py-2 rounded-lg font-medium transition-all border-2 border-transparent hover:border-gray-300"
                  style={`background-color: ${color.hex}; color: white;`}
                >
                  {color.name}
                </button>
              ))}
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Components Showcase -->
    <section class="py-12">
      <div class="container mx-auto px-4">
        <div class="max-w-4xl mx-auto" id="showcase-container">

          <!-- Current Color Info -->
          <div class="bg-white rounded-2xl p-6 mb-8 shadow-sm border-2 border-gray-200" id="current-color-info">
            <div class="flex items-center justify-between">
              <div class="flex items-center gap-3">
                <div
                  id="color-preview"
                  class="w-12 h-12 rounded-lg shadow-md"
                  style="background-color: #2563eb;"
                ></div>
                <div>
                  <p class="text-sm text-gray-500">Aktu√°ln√≠ barva</p>
                  <p id="color-name" class="text-lg font-bold text-gray-900">Modr√°</p>
                </div>
              </div>
              <div class="text-right">
                <p class="text-sm text-gray-500">Color ID</p>
                <code id="color-id" class="text-sm font-mono bg-gray-100 px-3 py-1 rounded">blue</code>
              </div>
            </div>
          </div>

          <!-- Block 1: Text Block -->
          <div class="bg-white rounded-2xl p-8 mb-8 shadow-sm">
            <div class="flex items-center gap-3 mb-6">
              <div class="w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center">
                <span class="text-2xl">üìù</span>
              </div>
              <div>
                <h2 class="text-2xl font-bold text-gray-900">Text Block</h2>
                <p class="text-sm text-gray-500">Bƒõ≈æn√Ω text s markdown form√°tov√°n√≠m</p>
              </div>
            </div>
            <div class="bg-gray-50 rounded-xl p-6">
              <TextBlock content={`
Toto je **textov√Ω blok** s podporou Markdown form√°tov√°n√≠. M≈Ø≈æete pou≈æ√≠t:

- **Tuƒçn√© p√≠smo**
- *Kurz√≠vu*
- [Odkazy](https://zdravicko.org)
- Seznamy a odr√°≈æky

## Nadpisy r≈Øzn√Ωch √∫rovn√≠

Text m≈Ø≈æe obsahovat jak√Ωkoliv obsah, kter√Ω doktor pot≈ôebuje.
              `} />
            </div>
          </div>

          <!-- Block 2: Features List Block -->
          {colors.map((color) => (
            <div class={`color-variant color-variant-${color.id} bg-white rounded-2xl p-8 mb-8 shadow-sm`} style="display: none;">
              <div class="flex items-center gap-3 mb-6">
                <div class="w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center">
                  <span class="text-2xl">‚úì</span>
                </div>
                <div>
                  <h2 class="text-2xl font-bold text-gray-900">Features List Block</h2>
                  <p class="text-sm text-gray-500">Seznam s ikonami za≈°krt√°v√°tka - <strong>respektuje barvu!</strong></p>
                </div>
              </div>
              <div class="bg-gray-50 rounded-xl p-6">
                <FeaturesListBlock
                  heading="Co v≈°e slu≈æba zahrnuje"
                  items={[
                    "Kompletn√≠ vy≈°et≈ôen√≠ a konzultaci",
                    "Individu√°ln√≠ pl√°n p√©ƒçe",
                    "Sledov√°n√≠ v√Ωvoje a pokroku",
                    "Telefonick√© konzultace zdarma",
                    "Doporuƒçen√≠ pro dom√°c√≠ p√©ƒçi",
                    "N√°vazn√° kontrola po mƒõs√≠ci"
                  ]}
                  color={color.id}
                />
              </div>
            </div>
          ))}

          <!-- Block 3: Steps Block -->
          {colors.map((color) => (
            <div class={`color-variant color-variant-${color.id} bg-white rounded-2xl p-8 mb-8 shadow-sm`} style="display: none;">
              <div class="flex items-center gap-3 mb-6">
                <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center">
                  <span class="text-2xl">üî¢</span>
                </div>
                <div>
                  <h2 class="text-2xl font-bold text-gray-900">Steps Block</h2>
                  <p class="text-sm text-gray-500">ƒå√≠slovan√© kroky - <strong>respektuje barvu!</strong></p>
                </div>
              </div>
              <div class="bg-gray-50 rounded-xl p-6">
                <StepsBlock
                  heading="Jak prob√≠h√° vy≈°et≈ôen√≠"
                  steps={[
                    {
                      title: "√övodn√≠ konzultace",
                      description: "Podrobn√Ω rozhovor s rodiƒçi o zdravotn√≠m stavu d√≠tƒõte, souƒçasn√Ωch pot√≠≈æ√≠ch a rodinn√© anamn√©ze."
                    },
                    {
                      title: "Fyzick√© vy≈°et≈ôen√≠",
                      description: "Komplexn√≠ fyzick√© vy≈°et≈ôen√≠ zahrnuj√≠c√≠ mƒõ≈ôen√≠ z√°kladn√≠ch parametr≈Ø a vy≈°et≈ôen√≠ jednotliv√Ωch syst√©m≈Ø."
                    },
                    {
                      title: "Diagnostika",
                      description: "Podle pot≈ôeby prov√°d√≠me dopl≈àuj√≠c√≠ vy≈°et≈ôen√≠ - odbƒõr krve, moƒçi, alergick√© testy."
                    },
                    {
                      title: "Vyhodnocen√≠ a pl√°n",
                      description: "Zhodnocen√≠ v≈°ech v√Ωsledk≈Ø, stanoven√≠ diagn√≥zy a vytvo≈ôen√≠ individu√°ln√≠ho pl√°nu l√©ƒçby."
                    }
                  ]}
                  color={color.id}
                />
              </div>
            </div>
          ))}

          <!-- Block 4: Tip Box Block -->
          {colors.map((color) => (
            <div class={`color-variant color-variant-${color.id} bg-white rounded-2xl p-8 mb-8 shadow-sm`} style="display: none;">
              <div class="flex items-center gap-3 mb-6">
                <div class="w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center">
                  <span class="text-2xl">üí°</span>
                </div>
                <div>
                  <h2 class="text-2xl font-bold text-gray-900">Tip Box Block</h2>
                  <p class="text-sm text-gray-500">Zv√Ωraznƒõn√Ω tip - <strong>respektuje barvu!</strong></p>
                </div>
              </div>
              <div class="bg-gray-50 rounded-xl p-6">
                <TipBoxBlock
                  heading="üí° Tip pro rodiƒçe"
                  content={`
P≈ôed n√°v≈°tƒõvou si p≈ôipravte seznam ot√°zek, kter√© V√°s zaj√≠maj√≠. Vezmƒõte si s sebou **pr≈Økaz poji≈°tƒõnce** a **oƒçkovac√≠ pr≈Økaz d√≠tƒõte**.

Pokud m√° d√≠tƒõ horeƒçku nebo akutn√≠ pot√≠≈æe, zavolejte n√°m p≈ôedem.
                  `}
                  icon="mdi:lightbulb-on"
                  color={color.id}
                />
              </div>
            </div>
          ))}

          <!-- Block 5: Warning Box Block (nemƒõn√≠ barvu) -->
          <div class="bg-white rounded-2xl p-8 mb-8 shadow-sm">
            <div class="flex items-center gap-3 mb-6">
              <div class="w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center">
                <span class="text-2xl">‚ö†Ô∏è</span>
              </div>
              <div>
                <h2 class="text-2xl font-bold text-gray-900">Warning Box Block</h2>
                <p class="text-sm text-gray-500">D≈Øle≈æit√© upozornƒõn√≠ (v≈ædy ƒçerven√©)</p>
              </div>
            </div>
            <div class="bg-gray-50 rounded-xl p-6">
              <WarningBoxBlock content="<p><strong>D≈Øle≈æit√© upozornƒõn√≠:</strong> V p≈ô√≠padƒõ v√°≈æn√Ωch akutn√≠ch stav≈Ø (vysok√° horeƒçka, du≈°nost, k≈ôeƒçe) volejte okam≈æitƒõ pohotovost 155.</p>" />
            </div>
          </div>

          <!-- Block 6: FAQ Block (nemƒõn√≠ barvu) -->
          <div class="bg-white rounded-2xl p-8 mb-8 shadow-sm">
            <div class="flex items-center gap-3 mb-6">
              <div class="w-10 h-10 bg-cyan-100 rounded-lg flex items-center justify-center">
                <span class="text-2xl">‚ùì</span>
              </div>
              <div>
                <h2 class="text-2xl font-bold text-gray-900">FAQ Block</h2>
                <p class="text-sm text-gray-500">ƒåasto kladen√© ot√°zky s odpovƒõƒèmi</p>
              </div>
            </div>
            <div class="bg-gray-50 rounded-xl p-6">
              <FAQBlock
                heading="ƒåasto kladen√© ot√°zky"
                items={[
                  {
                    question: "Jak dlouho trv√° vy≈°et≈ôen√≠?",
                    answer: "<p>Standardn√≠ vy≈°et≈ôen√≠ trv√° 30-45 minut. Prvn√≠ n√°v≈°tƒõva m≈Ø≈æe b√Ωt del≈°√≠ kv≈Øli podrobn√© anamn√©ze.</p>"
                  },
                  {
                    question: "Mus√≠m se objedn√°vat p≈ôedem?",
                    answer: "<p>Ano, ordinujeme pouze na objednan√© pacienty. M≈Ø≈æete se objednat telefonicky nebo e-mailem.</p>"
                  },
                  {
                    question: "Je vy≈°et≈ôen√≠ hrazeno poji≈°≈•ovnou?",
                    answer: "<p>Preventivn√≠ prohl√≠dky a vƒõt≈°ina bƒõ≈æn√Ωch vy≈°et≈ôen√≠ jsou plnƒõ hrazeny zdravotn√≠ poji≈°≈•ovnou.</p>"
                  }
                ]}
              />
            </div>
          </div>

          <!-- Block 7: CTA Box Block -->
          {colors.map((color) => (
            <div class={`color-variant color-variant-${color.id} bg-white rounded-2xl p-8 mb-8 shadow-sm`} style="display: none;">
              <div class="flex items-center gap-3 mb-6">
                <div class="w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center">
                  <span class="text-2xl">üìû</span>
                </div>
                <div>
                  <h2 class="text-2xl font-bold text-gray-900">CTA Box Block</h2>
                  <p class="text-sm text-gray-500">V√Ωzva k akci s tlaƒç√≠tkem - <strong>respektuje barvu!</strong></p>
                </div>
              </div>
              <div class="bg-gray-50 rounded-xl p-6">
                <CTABoxBlock
                  heading="M√°te dotazy?"
                  description="Nev√°hejte n√°s kontaktovat. R√°di V√°m porad√≠me a zodpov√≠me v≈°echny Va≈°e ot√°zky."
                  buttonText="Kontaktujte n√°s"
                  buttonLink="/kontakt"
                  color={color.id}
                />
              </div>
            </div>
          ))}

          <!-- 5. Image Block (nemƒõn√≠ barvu) -->
          <div class="bg-white rounded-2xl shadow-sm border border-gray-200 p-8">
            <div class="flex items-center gap-4 mb-6">
              <div class="w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center">
                <span class="text-2xl">üñºÔ∏è</span>
              </div>
              <div>
                <h2 class="text-2xl font-bold text-gray-900">Image Block</h2>
                <p class="text-sm text-gray-500">Obr√°zek s r√°meƒçkem a popiskem</p>
              </div>
            </div>
            <div class="bg-gray-50 rounded-xl p-6">
              <ImageBlock
                src="https://images.unsplash.com/photo-1631815589968-fdb09a223b1e?w=800&q=80"
                alt="Modern√≠ dƒõtsk√° ordinace"
                caption="P≈ô√≠klad obr√°zku s popiskem v na≈°√≠ ordinaci"
              />
            </div>
          </div>

          <!-- Info Box -->
          <div class="bg-linear-to-br from-purple-50 to-pink-50 rounded-2xl p-8 border-2 border-purple-200">
            <div class="flex items-start gap-4">
              <Icon name="mdi:information" class="w-8 h-8 text-purple-600 shrink-0" />
              <div>
                <h3 class="text-xl font-bold text-gray-900 mb-2">Jak pou≈æ√≠vat komponenty</h3>
                <p class="text-gray-700 mb-4">
                  Ka≈æd√° slu≈æba m≈Ø≈æe kombinovat tyto bloky v libovoln√©m po≈ôad√≠. Bloky oznaƒçen√© jako <strong>"respektuje barvu"</strong> se automaticky p≈ôizp≈Øsob√≠ barvƒõ slu≈æby.
                </p>
                <p class="text-sm text-gray-600">
                  üìñ V√≠ce informac√≠ najdete v souboru <code class="bg-white px-2 py-1 rounded text-purple-600">PROMPT-PRO-DOKTORY.md</code>
                </p>
              </div>
            </div>
          </div>

        </div>
      </div>
    </section>
  </main>

  <Footer />
</Layout>

<script>
  // Color data (matches server-side data)
  const colors = [
    { id: 'blue', name: 'Modr√°', hex: '#2563eb' },
    { id: 'cyan', name: 'Tyrkysov√°', hex: '#06b6d4' },
    { id: 'purple', name: 'Fialov√°', hex: '#9333ea' },
    { id: 'pink', name: 'R≈Ø≈æov√°', hex: '#ec4899' },
    { id: 'green', name: 'Zelen√°', hex: '#16a34a' },
    { id: 'orange', name: 'Oran≈æov√°', hex: '#ea580c' },
    { id: 'red', name: 'ƒåerven√°', hex: '#dc2626' },
    { id: 'yellow', name: '≈Ωlut√°', hex: '#ca8a04' },
    { id: 'indigo', name: 'Indigo', hex: '#4f46e5' },
    { id: 'teal', name: 'Teal', hex: '#0d9488' },
  ];

  let currentColor = 'blue';

  function switchColor(colorId: string) {
    // Hide all color variants
    document.querySelectorAll('.color-variant').forEach((el) => {
      (el as HTMLElement).style.display = 'none';
    });

    // Show variants for selected color
    document.querySelectorAll(`.color-variant-${colorId}`).forEach((el) => {
      (el as HTMLElement).style.display = 'block';
    });

    // Update active button
    document.querySelectorAll('.color-btn').forEach(btn => {
      btn.classList.remove('border-gray-900', 'shadow-md');
      btn.classList.add('border-transparent');
    });
    const activeBtn = document.querySelector(`[data-color="${colorId}"]`);
    if (activeBtn) {
      activeBtn.classList.remove('border-transparent');
      activeBtn.classList.add('border-gray-900', 'shadow-md');
    }

    // Update color info panel
    const colorData = colors.find(c => c.id === colorId);
    if (colorData) {
      const preview = document.getElementById('color-preview');
      const name = document.getElementById('color-name');
      const id = document.getElementById('color-id');

      if (preview) preview.style.backgroundColor = colorData.hex;
      if (name) name.textContent = colorData.name;
      if (id) id.textContent = colorData.id;
    }

    currentColor = colorId;
  }

  function initializeShowcase() {
    // Set up button click handlers
    document.querySelectorAll('.color-btn').forEach(btn => {
      btn.addEventListener('click', (e) => {
        e.preventDefault();
        const colorId = btn.getAttribute('data-color');
        if (colorId) {
          switchColor(colorId);
        }
      });
    });

    // Initialize with blue color
    switchColor('blue');
  }

  // Initialize on page load
  document.addEventListener('DOMContentLoaded', initializeShowcase);

  // Re-initialize after View Transitions
  document.addEventListener('astro:page-load', initializeShowcase);
</script>
