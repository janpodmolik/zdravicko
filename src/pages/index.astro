---
import Layout from '../layouts/Layout.astro';
import Header from '../components/common/Header.astro';
import MobileMenu from '../components/common/MobileMenu.astro';
import Hero from '../components/home/Hero.astro';
import QuickInfo from '../components/home/QuickInfo.astro';
import SpecialNotice from '../components/home/SpecialNotice.astro';
import About from '../components/home/About.astro';
import HorizontalCarousel from '../components/common/HorizontalCarousel.astro';
import ServiceCard from '../components/cards/ServiceCardCarousel.astro';
import BlogCard from '../components/cards/BlogCardCarousel.astro';
import NewsCard from '../components/cards/NewsCard.astro';
import OpeningHours from '../components/home/OpeningHours.astro';
import Contact from '../components/home/Contact.astro';
import Footer from '../components/common/Footer.astro';

import { getTodayOpeningHours } from '../utils/openingHours';
import { getPublishedNews, getPublishedBlogPosts } from '../utils/contentHelpers';

const todayInfo = getTodayOpeningHours();
const latestNews = (await getPublishedNews()).slice(0, 3);
const latestBlogPosts = (await getPublishedBlogPosts()).slice(0, 3);

// Prioritní služby (top 4)
const priorityServices = [
  {
    icon: 'mdi:mother-nurse',
    title: 'Laktační poradenství',
    description: 'Profesionální podpora a pomoc při kojení',
    href: '/kojeni',
    color: 'pink' as const
  },
  {
    icon: 'mdi:stethoscope',
    title: 'Preventivní prohlídky',
    description: 'Pravidelné kontroly růstu a vývoje dítěte',
    href: '/sluzby/preventivni-prohlidky',
    color: 'blue' as const
  },
  {
    icon: 'mdi:needle',
    title: 'Očkování',
    description: 'Kompletní vakcinační program dle kalendáře',
    href: '/sluzby/ockovani',
    color: 'cyan' as const
  },
  {
    icon: 'mdi:hospital-box',
    title: 'Akutní péče',
    description: 'Ošetření běžných dětských onemocnění',
    href: '/sluzby/akutni-pece',
    color: 'purple' as const
  }
];
---

<Layout title="Zdravíčko - Dětská ordinace | Kvalitní péče o vaše děti">
  <Header activePage="home" />
  <MobileMenu activePage="home" />

  <Hero />
  <QuickInfo todayInfo={todayInfo} />

  <SpecialNotice />

  <!-- Služby Carousel -->
  <HorizontalCarousel
    id="sluzby"
    title="Naše služby"
    description="Poskytujeme kompletní péči pro vaše děti"
    ctaText="Všechny služby"
    ctaLink="/sluzby"
    bgColor="white"
  >
    {priorityServices.map(service => (
      <ServiceCard {...service} />
    ))}
  </HorizontalCarousel>

  <!-- Aktuality Carousel -->
  {latestNews.length > 0 && (
    <HorizontalCarousel
      id="aktuality"
      title="Aktuality"
      description="Aktuální informace z naší ordinace"
      ctaText="Všechny aktuality"
      ctaLink="/aktuality"
      bgColor="gray"
    >
      {latestNews.map(news => (
        <NewsCard news={news} />
      ))}
    </HorizontalCarousel>
  )}

  <!-- Blog Carousel -->
  {latestBlogPosts.length > 0 && (
    <HorizontalCarousel
      id="blog"
      title="Z našeho blogu"
      description="Užitečné rady a informace pro rodiče"
      ctaText="Všechny články"
      ctaLink="/blog"
      bgColor="white"
    >
      {latestBlogPosts.map(post => (
        <BlogCard post={post} />
      ))}
    </HorizontalCarousel>
  )}

  <About />
  <OpeningHours />
  <Contact />

  <Footer />
</Layout>
