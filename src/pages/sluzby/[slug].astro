---
import Layout from '../../layouts/Layout.astro';
import Header from '../../components/Header.astro';
import MobileMenu from '../../components/MobileMenu.astro';
import Footer from '../../components/Footer.astro';
import { services } from '../../data/services';
import { colorClasses } from '../../utils/colors';
import { Icon } from 'astro-icon/components';

export function getStaticPaths() {
  return services.map((service) => ({
    params: { slug: service.slug },
    props: { service },
  }));
}

const { service } = Astro.props;
const colors = colorClasses[service.color];
---

<Layout 
  title={`${service.title} - Zdravíčko`}
  description={service.excerpt}
>
  <Header activePage="sluzby" />
  <MobileMenu activePage="sluzby" />
  
  <main>
    <!-- Hero Section -->
    <section class={`pt-32 pb-16 bg-linear-to-br ${colors.gradient}`}>
      <div class="container mx-auto px-4">
        <div class="max-w-4xl mx-auto">
          <a 
            href="/sluzby"
            class="inline-flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-6 font-medium"
          >
            <Icon name="mdi:arrow-left" class="w-5 h-5" />
            Zpět na všechny služby
          </a>
          
          <div class="flex items-start gap-6 mb-8">
            <div class={`w-20 h-20 ${colors.bg} rounded-2xl flex items-center justify-center shrink-0`}>
              <Icon name={service.icon} class="w-10 h-10 text-white" />
            </div>
            <div class="flex-1">
              <h1 class="text-4xl md:text-5xl font-bold text-gray-900 mb-4">
                {service.title}
              </h1>
              <p class="text-xl text-gray-600">
                {service.excerpt}
              </p>
            </div>
          </div>

          <div class="flex flex-wrap gap-4">
            {service.duration && (
              <div class={`flex items-center gap-2 ${colors.bgLight} px-4 py-2 rounded-lg`}>
                <Icon name="mdi:clock-outline" class={`w-5 h-5 ${colors.text}`} />
                <span class="text-gray-700 font-medium">{service.duration}</span>
              </div>
            )}
            {service.price && (
              <div class={`flex items-center gap-2 ${colors.bgLight} px-4 py-2 rounded-lg`}>
                <Icon name="mdi:currency-eur" class={`w-5 h-5 ${colors.text}`} />
                <span class="text-gray-700 font-medium">{service.price}</span>
              </div>
            )}
          </div>
        </div>
      </div>
    </section>

    <!-- Content Section -->
    <section class="py-20 bg-white">
      <div class="container mx-auto px-4">
        <div class="max-w-4xl mx-auto">
          <div class="prose prose-lg max-w-none mb-12">
            <p class="text-gray-700 leading-relaxed text-lg">
              {service.description}
            </p>
          </div>

          <!-- Features -->
          <div class="bg-gray-50 rounded-2xl p-8 mb-12">
            <h2 class="text-2xl font-bold text-gray-900 mb-6">Co zahrnuje služba</h2>
            <div class="grid md:grid-cols-2 gap-4">
              {service.features.map((feature) => (
                <div class="flex items-start gap-3">
                  <Icon name="mdi:check-circle" class={`w-6 h-6 ${colors.text} shrink-0 mt-0.5`} />
                  <span class="text-gray-700">{feature}</span>
                </div>
              ))}
            </div>
          </div>

          <!-- CTA -->
          <div class={`bg-linear-to-br ${colors.gradient} rounded-2xl p-8 text-center`}>
            <h2 class="text-2xl font-bold text-gray-900 mb-4">
              Chcete se objednat?
            </h2>
            <p class="text-gray-600 mb-6">
              Zavolejte nám nebo napište a domluvíme si termín, který vám bude vyhovovat.
            </p>
            <div class="flex flex-col sm:flex-row gap-4 justify-center">
              <a 
                href="tel:+420123456789"
                class={`inline-flex items-center justify-center gap-2 px-6 py-3 ${colors.bg} text-white font-semibold rounded-lg hover:opacity-90 transition-opacity`}
              >
                <Icon name="mdi:phone" class="w-5 h-5" />
                +420 123 456 789
              </a>
              <a 
                href="/#kontakt"
                class="inline-flex items-center justify-center gap-2 px-6 py-3 bg-white text-gray-700 font-semibold rounded-lg hover:bg-gray-50 transition-colors border-2 border-gray-200"
              >
                <Icon name="mdi:email" class="w-5 h-5" />
                Kontaktní formulář
              </a>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Other Services -->
    <section class="py-20 bg-gray-50">
      <div class="container mx-auto px-4">
        <div class="max-w-4xl mx-auto">
          <h2 class="text-3xl font-bold text-gray-900 mb-8 text-center">
            Další naše služby
          </h2>
          <div class="grid md:grid-cols-3 gap-4">
            {services
              .filter((s) => s.id !== service.id)
              .slice(0, 3)
              .map((otherService) => {
                const otherColors = colorClasses[otherService.color];
                return (
                  <a 
                    href={`/sluzby/${otherService.slug}`}
                    class="bg-white p-6 rounded-xl border-2 border-gray-100 hover:border-gray-300 hover:shadow-md transition-all"
                  >
                    <div class={`w-12 h-12 ${otherColors.bg} rounded-lg flex items-center justify-center mb-4`}>
                      <Icon name={otherService.icon} class="w-6 h-6 text-white" />
                    </div>
                    <h3 class="font-bold text-gray-900 mb-2">
                      {otherService.title}
                    </h3>
                    <p class="text-sm text-gray-600">
                      {otherService.excerpt}
                    </p>
                  </a>
                );
              })}
          </div>
        </div>
      </div>
    </section>
  </main>
  
  <Footer />
</Layout>
