<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Zdrav√≠ƒçko - Administrace</title>
  <meta name="robots" content="noindex, nofollow">
  
  <!-- Custom styling pro lep≈°√≠ vzhled -->
  <style>
    /* Vlastn√≠ branding pro CMS */
    [data-slate-editor] {
      -webkit-user-modify: read-write !important;
    }
    
    /* Modr√© barevn√© sch√©ma Zdrav√≠ƒçka */
    .nc-app-header {
      background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%) !important;
    }
    
    /* Tlaƒç√≠tka */
    button[class*="Button-module_button"] {
      background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%) !important;
      border: none !important;
      border-radius: 8px !important;
      padding: 10px 20px !important;
      font-weight: 600 !important;
      transition: all 0.2s !important;
    }
    
    button[class*="Button-module_button"]:hover {
      transform: translateY(-1px) !important;
      box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4) !important;
    }
    
    /* Login obrazovka */
    [class*="AuthenticationPage"] {
      background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%) !important;
    }
    
    /* Cards a panels */
    [class*="Card"] {
      border-radius: 12px !important;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08) !important;
    }
    
    /* Editor */
    .nc-entryEditor-controlPane {
      background: #f8fafc !important;
    }
  </style>
</head>
<body>
  <!-- Decap CMS se naƒçte zde -->
  <script src="https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.js"></script>
  
  <!-- Custom preview templates -->
  <script>
    // ƒåek√°me na naƒçten√≠ CMS
    CMS.init();

    // ============================================
    // BLOG PREVIEW
    // ============================================
    const BlogPreview = createClass({
      render() {
        const entry = this.props.entry;
        const title = entry.getIn(['data', 'title']);
        const date = entry.getIn(['data', 'date']);
        const category = entry.getIn(['data', 'category']);
        const excerpt = entry.getIn(['data', 'excerpt']);
        const body = entry.getIn(['data', 'body']);
        const author = entry.getIn(['data', 'author']);
        
        // Form√°tov√°n√≠ data
        const dateObj = date ? new Date(date) : new Date();
        const formattedDate = dateObj.toLocaleDateString('cs-CZ', {
          year: 'numeric',
          month: 'long',
          day: 'numeric'
        });
        
        return h('div', { 
          style: {
            fontFamily: 'Inter, system-ui, -apple-system, sans-serif',
            maxWidth: '800px',
            margin: '0 auto',
            padding: '40px 20px',
            backgroundColor: '#ffffff'
          }
        },
          // Kategorie badge
          h('div', {
            style: {
              display: 'inline-block',
              backgroundColor: '#3b82f6',
              color: 'white',
              padding: '6px 16px',
              borderRadius: '20px',
              fontSize: '14px',
              fontWeight: '600',
              marginBottom: '20px'
            }
          }, category || 'Bez kategorie'),
          
          // Titulek
          h('h1', {
            style: {
              fontSize: '42px',
              fontWeight: '800',
              color: '#1e293b',
              lineHeight: '1.2',
              marginBottom: '20px',
              marginTop: '0'
            }
          }, title || 'N√°zev ƒçl√°nku'),
          
          // Metadata
          h('div', {
            style: {
              display: 'flex',
              gap: '20px',
              color: '#64748b',
              fontSize: '15px',
              marginBottom: '30px',
              paddingBottom: '20px',
              borderBottom: '2px solid #e2e8f0'
            }
          },
            h('span', {}, `üìÖ ${formattedDate}`),
            author && h('span', {}, `‚úçÔ∏è ${author}`)
          ),
          
          // Excerpt
          excerpt && h('div', {
            style: {
              fontSize: '20px',
              lineHeight: '1.7',
              color: '#475569',
              marginBottom: '30px',
              fontWeight: '500',
              fontStyle: 'italic',
              padding: '20px',
              backgroundColor: '#f1f5f9',
              borderLeft: '4px solid #3b82f6',
              borderRadius: '8px'
            }
          }, excerpt),
          
          // Obsah ƒçl√°nku
          h('div', {
            style: {
              fontSize: '18px',
              lineHeight: '1.8',
              color: '#334155'
            },
            dangerouslySetInnerHTML: {
              __html: this.props.widgetFor('body')
            }
          })
        );
      }
    });

    // ============================================
    // AKTUALITY PREVIEW
    // ============================================
    const NewsPreview = createClass({
      render() {
        const entry = this.props.entry;
        const title = entry.getIn(['data', 'title']);
        const color = entry.getIn(['data', 'color']) || 'blue';
        const icon = entry.getIn(['data', 'icon']) || 'mdi:information';
        const date = entry.getIn(['data', 'date']);
        const body = entry.getIn(['data', 'body']);
        
        const dateObj = date ? new Date(date) : new Date();
        const formattedDate = dateObj.toLocaleDateString('cs-CZ', {
          year: 'numeric',
          month: 'long',
          day: 'numeric'
        });
        
        // Barevn√© sch√©ma
        const colorSchemes = {
          blue: { bg: '#dbeafe', border: '#3b82f6', text: '#1e40af' },
          orange: { bg: '#fed7aa', border: '#f97316', text: '#9a3412' },
          green: { bg: '#dcfce7', border: '#22c55e', text: '#166534' },
          red: { bg: '#fee2e2', border: '#ef4444', text: '#991b1b' },
          yellow: { bg: '#fef3c7', border: '#eab308', text: '#854d0e' },
          purple: { bg: '#f3e8ff', border: '#a855f7', text: '#6b21a8' }
        };
        
        const scheme = colorSchemes[color] || colorSchemes.blue;
        
        return h('div', {
          style: {
            fontFamily: 'Inter, system-ui, -apple-system, sans-serif',
            maxWidth: '700px',
            margin: '20px auto',
            padding: '24px',
            backgroundColor: scheme.bg,
            border: `3px solid ${scheme.border}`,
            borderRadius: '16px',
            boxShadow: '0 4px 20px rgba(0,0,0,0.1)'
          }
        },
          // Header s ikonou
          h('div', {
            style: {
              display: 'flex',
              alignItems: 'flex-start',
              gap: '16px',
              marginBottom: '16px'
            }
          },
            // Icon placeholder
            h('div', {
              style: {
                width: '48px',
                height: '48px',
                borderRadius: '12px',
                backgroundColor: scheme.border,
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'center',
                flexShrink: '0',
                fontSize: '24px'
              }
            }, 'üì¢'),
            
            // Titulek
            h('div', { style: { flex: '1' } },
              h('h2', {
                style: {
                  fontSize: '24px',
                  fontWeight: '700',
                  color: scheme.text,
                  margin: '0 0 8px 0'
                }
              }, title || 'N√°zev aktuality'),
              
              // Datum
              h('div', {
                style: {
                  fontSize: '14px',
                  color: scheme.text,
                  opacity: '0.8'
                }
              }, formattedDate)
            )
          ),
          
          // Obsah
          h('div', {
            style: {
              fontSize: '16px',
              lineHeight: '1.6',
              color: scheme.text
            },
            dangerouslySetInnerHTML: {
              __html: this.props.widgetFor('body')
            }
          })
        );
      }
    });

    // ============================================
    // SPECIAL NOTICE PREVIEW (NOV√â)
    // ============================================
    const SpecialNoticePreview = createClass({
      render() {
        const entry = this.props.entry;
        const active = entry.getIn(['data', 'active']);
        const message = entry.getIn(['data', 'message']);
        const hours = entry.getIn(['data', 'hours']);
        const type = entry.getIn(['data', 'type']) || 'warning';
        
        // Pokud nen√≠ aktivn√≠, zobraz upozornƒõn√≠
        if (!active) {
          return h('div', {
            style: {
              fontFamily: 'Inter, system-ui, -apple-system, sans-serif',
              maxWidth: '800px',
              margin: '40px auto',
              padding: '40px',
              backgroundColor: '#f1f5f9',
              border: '2px dashed #94a3b8',
              borderRadius: '16px',
              textAlign: 'center',
              color: '#64748b'
            }
          },
            h('div', { style: { fontSize: '48px', marginBottom: '16px' } }, 'üîï'),
            h('h3', { style: { fontSize: '24px', marginBottom: '8px', color: '#475569' } }, 'Ozn√°men√≠ nen√≠ aktivn√≠'),
            h('p', { style: { fontSize: '16px' } }, 'Zapnƒõte p≈ôep√≠naƒç "Zobrazit ozn√°men√≠" pro aktivaci banneru na webu.')
          );
        }
        
        // Konfigurace podle typu
        const typeConfig = {
          warning: {
            gradient: 'linear-gradient(to right, #fef3c7, #fed7aa)',
            border: '#f59e0b',
            icon: '‚ö†Ô∏è',
            badgeBg: '#fef3c7',
            badgeText: '#92400e'
          },
          info: {
            gradient: 'linear-gradient(to right, #dbeafe, #bfdbfe)',
            border: '#3b82f6',
            icon: '‚ÑπÔ∏è',
            badgeBg: '#dbeafe',
            badgeText: '#1e40af'
          },
          urgent: {
            gradient: 'linear-gradient(to right, #fee2e2, #fecaca)',
            border: '#ef4444',
            icon: 'üö®',
            badgeBg: '#fee2e2',
            badgeText: '#991b1b'
          }
        };
        
        const config = typeConfig[type] || typeConfig.warning;
        
        return h('div', {
          style: {
            fontFamily: 'Inter, system-ui, -apple-system, sans-serif',
            padding: '40px 20px',
            background: config.gradient
          }
        },
          h('div', {
            style: {
              maxWidth: '800px',
              margin: '0 auto',
              backgroundColor: 'white',
              borderRadius: '16px',
              padding: '32px',
              border: `3px solid ${config.border}`,
              boxShadow: '0 10px 40px rgba(0,0,0,0.15)',
              position: 'relative'
            }
          },
            // Ikona v prav√©m horn√≠m rohu
            h('div', {
              style: {
                position: 'absolute',
                top: '16px',
                right: '16px',
                fontSize: '40px',
                opacity: '0.8'
              }
            }, config.icon),
            
            // Titulek
            h('h3', {
              style: {
                fontSize: '24px',
                fontWeight: '700',
                color: '#1e293b',
                marginBottom: '16px',
                marginTop: '0',
                paddingRight: '60px'
              }
            }, 'D≈Øle≈æit√© ozn√°men√≠'),
            
            // Zpr√°va
            h('p', {
              style: {
                fontSize: '18px',
                lineHeight: '1.7',
                color: '#475569',
                marginBottom: hours ? '20px' : '0'
              }
            }, message || 'Zde bude text ozn√°men√≠...'),
            
            // Upraven√© hodiny (pokud jsou vyplnƒõny)
            hours && h('div', {
              style: {
                display: 'inline-flex',
                alignItems: 'center',
                gap: '8px',
                backgroundColor: config.badgeBg,
                color: config.badgeText,
                padding: '10px 16px',
                borderRadius: '8px',
                fontSize: '16px',
                fontWeight: '600'
              }
            },
              h('span', {}, 'üïê'),
              h('span', {}, hours)
            )
          )
        );
      }
    });

    // Registrace preview templates
    CMS.registerPreviewTemplate('blog', BlogPreview);
    CMS.registerPreviewTemplate('news', NewsPreview);
    CMS.registerPreviewTemplate('special_notice', SpecialNoticePreview);
  </script>
</body>
</html>
